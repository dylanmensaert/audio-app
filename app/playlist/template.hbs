{{c-menu}}

{{#if isEditMode}}
  {{c-input-bar value=name placeholder='Edit' done='saveEdit'}}
{{/if}}

<div class="card my-card-cover">
  {{#if model.models.length}}
    <div class="card-image waves-effect waves-block waves-light" {{action 'play'}}>
      {{c-parallax src=model.thumbnail}}
    </div>
  {{else}}
    <div class="card-image">
      {{c-parallax src=model.thumbnail}}
    </div>
  {{/if}}

  <div class="card-content my-relative">
    {{#c-fixed-btn class='fixed-action-btn horizontal click-to-toggle my-card-content'}}
      <a class="btn-floating btn-large waves-effect waves-light red my-model-btn">
        <i class="material-icons">menu</i>
      </a>

      <ul>
        {{#if model.isEditable}}
          <li>
            <a href="javascript:void(0)" class="btn-floating green" {{action 'setupEdit'}}>
              <i class="material-icons">mode_edit</i>
            </a>
          </li>
        {{/if}}

        {{#if model.isSaved}}
          <li>
            <a href="javascript:void(0)" class="btn-floating orange" {{action 'delete'}}>
                <i class="material-icons">delete</i>
            </a>
          </li>
        {{else}}
          <li>
            <a href="javascript:void(0)" class="btn-floating purple" {{action 'save'}}>
                <i class="material-icons">attachment</i>
            </a>
          </li>
        {{/if}}

        {{#unless model.isDownloaded}}
          <li>
            <a href="javascript:void(0)" class="btn-floating blue" {{action 'download'}}>
                <i class="material-icons">file_download</i>
            </a>
          </li>
        {{/unless}}
      </ul>
    {{/c-fixed-btn}}

    <span class="card-title activator grey-text text-darken-4 truncate">
      {{model.name}}
    </span>

      <div class="row grey-text my-subtext">
        <div class="col s6">
          {{unless model.permission 'Playlist -'}} {{model.numberOfTracks}} tracks
        </div>

        <div class="col s6 my-right">
          {{#if model.isDownloaded}}
            <i class="material-icons">file_download</i>
          {{else if model.isSaved}}
            <i class="material-icons">attachment</i>
          {{/if}}

          {{#if model.isBusy}}
            {{c-spinner type='small'}}
          {{/if}}
        </div>
      </div>
  </div>
</div>

{{c-tracks models=model.tracks isPending=model.hasNextPageToken playlist=model didScrollToBottom='didScrollToBottom'}}